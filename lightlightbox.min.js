/*!
 * lightLightbox
 * A single file, light, dynamic lightbox solution with ability to load images/HTML into a lightbox with gallery support. Support for IE7+, mobile/tablet browsers, and zoom and automatic resizing.
 * Version: 1.1.1 (December 19th, 2014)
 * requires jQuery
 */

var lightLightBox;$(function(){var e=function(){var e=this;this.options={overlayIndex:101,overlayOpacity:.85,imagePadding:100,caption:true};this.ids={overlay:"lightlightbox-overlay",imageId:"lightlightbox-image",imageCont:"lightlightbox-cont",closeButton:"lightlightbox-close",nextButton:"lightlightbox-next",previousButton:"lightlightbox-prev",load:"lightlightbox-loading",content:"lightlightbox-content",caption:"lightlightbox-caption"};this.controlStyle="position: absolute; cursor: pointer; margin-top: -36px; z-index: "+(this.options.overlayIndex+3)+"; color: #fff; text-shadow: 0 0 10px #000; font-weight: 100; font-size: 48px; padding: 10px; ";this.template={overlayHTML:'<div id="'+this.ids.overlay+'" style="display: none; top: 0; left: 0; z-index: '+this.options.overlayIndex+"; background-color: #000; position: fixed; opacity: "+this.options.overlayOpacity+"; filter: alpha(opacity="+this.options.overlayOpacity*100+'); width: 100%; height: 100%;"></div>',imageBox:'<div id="'+this.ids.imageCont+'" style="font-family: Arial; visibility: hidden; top: 0; opacity: 0; filter: alpha(opacity=0); margin: auto; position: absolute; z-index: '+(this.options.overlayIndex+1)+';"><div id="'+this.ids.closeButton+'" style="position: absolute; cursor: pointer; top: -10px; right: -10px; z-index: '+(this.options.overlayIndex+3)+'; color: #000; background: #fff; border-radius: 27px; padding: 0; height: 27px; width: 27px; text-align: center; line-height: 1.1; font-weight: 100; font-size: 27px; box-shadow: -3px 3px 15px #000;">&#215;</div></div>',loading:'<div id="'+this.ids.load+'" style="color: #fff; font-size: 26px; position: fixed; left: 0; top: 50%; text-align: center; width: 100%; z-index:'+(this.options.overlayIndex+2)+';"><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div></div>',previousButton:'<div style="'+this.controlStyle+'left: -40px;" id="'+this.ids.previousButton+'">&lsaquo;</div>',nextButton:'<div style="'+this.controlStyle+'right: -40px;" id="'+this.ids.nextButton+'">&rsaquo;</div>',caption:'<div id="'+this.ids.caption+'" style="position: absolute; padding: 15px; bottom: 0; left: 0; color: #fff; background: #000; box-sizing: border-box; background: rgba(0, 0, 0, '+this.options.overlayOpacity+')"></div>'};this.origImageWidth=0;this.origImageHeight=0;this.timer=0;this.galleryCount=0;this.subGalleryId=false;this.currentImage=0;this.lightboxOpen=false;this.gallery=[];this.context="";this.noResize=false;$("div."+this.ids.content).hide();this.resizeImage=function(){var e=$(window).scrollTop();var t=$(window).scrollLeft();var n=$(window).height();var r=$(window).width();var i=window.innerWidth-this.options.imagePadding;var s=window.innerHeight-this.options.imagePadding/2;var o=false;var u=this.origImageHeight;var a=this.origImageWidth;var f=a;var l=u;if(s&&n!=s){n=s}if(i&&r!=i){r=i}while(!o){if(f>r){f=r-this.options.imagePadding;l=u/a*f}else if(l>n){l=n-this.options.imagePadding;if(this.context!=="content"){f=a/u*l}}else{o=true}}var c=e+n/2-l/2+this.options.imagePadding/4;var h=t+r/2-f/2+this.options.imagePadding/2;$("#"+this.ids.imageCont).css("top",Math.floor(c));$("#"+this.ids.imageCont).css("left",Math.floor(h-10));$("#"+this.ids.nextButton).css("top",Math.floor(l/2));$("#"+this.ids.previousButton).css("top",Math.floor(l/2));$("#"+this.ids.imageCont).width(Math.floor(f));$("#"+this.ids.imageCont).height(Math.floor(l));$("#"+this.ids.imageId).width(Math.floor(f));$("#"+this.ids.imageId).height(Math.floor(l))};this.loadingAnim=function(){if(e.timer>=3){$("#"+e.ids.load).children().eq(e.timer-3).children().fadeOut(100)}else{$("#"+e.ids.load).children().eq(e.timer).children().fadeIn(100)}e.timer++;if(e.timer>=6){e.timer=0}};this.setImage=function(){$("#"+this.ids.imageCont).css("visibility","visible");this.lightboxOpen=true;this.resizeImage();$("#"+this.ids.imageCont).animate({opacity:1},400)};this.loadImage=function(t,n,r,i){$("body").append(this.template.imageBox);if(this.context!=="content"){$("body").append(this.template.loading)}if(this.galleryCount>1){$(this.template.nextButton).appendTo("#"+this.ids.imageCont);$(this.template.previousButton).appendTo("#"+this.ids.imageCont)}this.noResize=false;this.lightboxOpen=false;if(!r){var s=setInterval(this.loadingAnim,500);$('<img id="'+this.ids.imageId+'" style="z-index: '+(this.options.overlayIndex+2)+';" src="'+t+'" alt="'+n+'">').load(function(){$(this).appendTo("#"+e.ids.imageCont);e.origImageWidth=$(this).width();e.origImageHeight=$(this).height();e.setImage();if(e.options.caption&&n){$(e.template.caption).appendTo("#"+e.ids.imageCont);$("#"+e.ids.caption).text(n)}e.timer=0;clearInterval(s);$("#"+e.ids.load).fadeOut(200,function(){$(this).remove()})})}else{$("#"+this.ids.imageCont).append('<div id="'+this.ids.imageId+'" style="background: #fff; overflow-y: auto; z-index: '+(this.options.overlayIndex+2)+';">'+r+"</div>");if(i){this.noResize=true;this.origImageWidth=i[0];this.origImageHeight=i[1]}else{this.origImageWidth=$("#"+this.ids.imageId).outerWidth()-this.options.imagePadding;this.origImageHeight=$("#"+this.ids.imageId).outerHeight()+40}this.setImage()}};$("body").on("click",'a[rel="content"], a[rel="gallery"], a[rel="lightbox"]',function(t){var n="";var r="";var i=$(this).attr("rel");var s=false;var o=false;if(i=="lightbox"){n=$(this).attr("href");r=$(this).find("img").attr("alt");if(!r){r=""}e.galleryCount=$('a[rel="lightbox"]').length;e.currentImage=$('a[rel="lightbox"]').index(this)}else if(i=="gallery"){e.subGalleryId=$(this).attr("id");var u=$(this).data("gallery").split(";");e.gallery[e.subGalleryId]=[];for(var a=0;a<u.length;a++){e.gallery[e.subGalleryId][a]=u[a].split(",")}n=e.gallery[e.subGalleryId][0][0];r=e.gallery[e.subGalleryId][0][1];e.galleryCount=e.gallery[e.subGalleryId].length;e.currentImage=0}else{var f=$(this).next("div."+e.ids.content);s=f.html();var l=f.attr("width");var c=f.attr("height");if(l&&c){o=[l,c]}e.galleryCount=0}e.context=i;$("body").append(e.template.overlayHTML);$("#"+e.ids.overlay).fadeIn(200);e.loadImage(n,r,s,o);t.preventDefault()});$(window).resize(function(){if(e.lightboxOpen&&!e.noResize){e.resizeImage()}});$("body").on("click","#"+this.ids.overlay+", #"+this.ids.closeButton,function(){if(!e.lightboxOpen){return false}$("#"+e.ids.overlay).fadeOut(200,function(){$(this).remove()});$("#"+e.ids.imageCont).fadeOut(400,function(){$(this).remove()});e.lightboxOpen=false});$("body").on("click","#"+this.ids.previousButton+", #"+this.ids.nextButton,function(){if(!e.lightboxOpen){return false}if($(this).attr("id")==e.ids.nextButton){e.currentImage++;if(e.currentImage>e.galleryCount-1){e.currentImage=0}}else{e.currentImage--;if(e.currentImage<0){e.currentImage=e.galleryCount-1}}$("#"+e.ids.imageCont).fadeOut(function(){$(this).remove();var t,n;if(e.context=="gallery"){t=e.gallery[e.subGalleryId][e.currentImage][0];n=e.gallery[e.subGalleryId][e.currentImage][1]}else{t=$('a[rel="lightbox"]').eq(e.currentImage).attr("href");n=$('a[rel="lightbox"]').eq(e.currentImage).find("img").attr("alt")}e.loadImage(t,n)})})};lightLightBox=new e})
