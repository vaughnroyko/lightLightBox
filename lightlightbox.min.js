/*!
 * lightLightbox
 * A single file, light, dynamic lightbox solution with ability to load images/HTML into a lightbox with gallery support. Support for IE7+, mobile/tablet browsers, and zoom and automatic resizing.
 * Version: 1.2 (April 23rd, 2015)
 * requires jQuery
 */

 var lightLightBox;$(function(){var i=function(){var i=this;this.options={overlayIndex:101,overlayOpacity:.85,imagePadding:100,caption:!0},this.ids={overlay:"lightlightbox-overlay",imageId:"lightlightbox-image",imageCont:"lightlightbox-cont",closeButton:"lightlightbox-close",nextButton:"lightlightbox-next",previousButton:"lightlightbox-prev",load:"lightlightbox-loading",content:"lightlightbox-content",caption:"lightlightbox-caption"},this.controlStyle="position: absolute; cursor: pointer; margin-top: -36px; z-index: "+(this.options.overlayIndex+3)+"; color: #fff; text-shadow: 0 0 10px #000; font-weight: 100; font-size: 48px; padding: 10px; ",this.template={overlayHTML:'<div id="'+this.ids.overlay+'" style="display: none; top: 0; left: 0; z-index: '+this.options.overlayIndex+"; background-color: #000; position: fixed; opacity: "+this.options.overlayOpacity+"; filter: alpha(opacity="+100*this.options.overlayOpacity+'); width: 100%; height: 100%;"></div>',imageBox:'<div id="'+this.ids.imageCont+'" style="font-family: Arial; visibility: hidden; top: 0; opacity: 0; filter: alpha(opacity=0); margin: auto; position: absolute; z-index: '+(this.options.overlayIndex+1)+';"><div id="'+this.ids.closeButton+'" style="position: absolute; cursor: pointer; top: -10px; right: -10px; z-index: '+(this.options.overlayIndex+3)+'; color: #000; background: #fff; border-radius: 27px; padding: 0; height: 27px; width: 27px; text-align: center; line-height: 1.1; font-weight: 100; font-size: 27px; box-shadow: -3px 3px 15px #000;">&#215;</div></div>',loading:'<div id="'+this.ids.load+'" style="color: #fff; font-size: 26px; position: fixed; left: 0; top: 50%; text-align: center; width: 100%; z-index:'+(this.options.overlayIndex+2)+';"><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div><div style="width: 20px; display: inline-block;"><span style="display: none;">&bull;</span></div></div>',previousButton:'<div style="'+this.controlStyle+'left: -40px;" id="'+this.ids.previousButton+'">&lsaquo;</div>',nextButton:'<div style="'+this.controlStyle+'right: -40px;" id="'+this.ids.nextButton+'">&rsaquo;</div>',caption:'<div id="'+this.ids.caption+'" style="position: absolute; padding: 15px; bottom: 0; left: 0; color: #fff; background: #000; box-sizing: border-box; background: rgba(0, 0, 0, '+this.options.overlayOpacity+')"></div>'},this.origImageWidth=0,this.origImageHeight=0,this.timer=0,this.galleryCount=0,this.subGalleryId=!1,this.currentImage=0,this.lightboxOpen=!1,this.gallery=[],this.context="",this.noResize=!1,$("div."+this.ids.content).hide(),this.resizeImage=function(){var t=$(window).scrollTop(),e=$(window).scrollLeft(),o=$(window).height(),a=$(window).width(),n=window.innerWidth-this.options.imagePadding,s=window.innerHeight-this.options.imagePadding/2,l=!1,d=this.origImageHeight,h=this.origImageWidth,r=h,g=d;if(s&&o!=s&&(o=s),n&&a!=n&&(a=n),!i.noResize)for(;!l;)r>a?(r=a-this.options.imagePadding,g=d/h*r):g>o?(g=o-this.options.imagePadding,"content"!==this.context&&(r=h/d*g)):l=!0;var p=t+o/2-g/2+this.options.imagePadding/4,c=e+a/2-r/2+this.options.imagePadding/2;$("#"+this.ids.imageCont).css("top",Math.floor(p)),$("#"+this.ids.imageCont).css("left",Math.floor(c-10)),$("#"+this.ids.nextButton).css("top",Math.floor(g/2)),$("#"+this.ids.previousButton).css("top",Math.floor(g/2)),$("#"+this.ids.imageCont).width(Math.floor(r)),$("#"+this.ids.imageCont).height(Math.floor(g)),$("#"+this.ids.imageId).width(Math.floor(r)),$("#"+this.ids.imageId).height(Math.floor(g))},this.loadingAnim=function(){i.timer>=3?$("#"+i.ids.load).children().eq(i.timer-3).children().fadeOut(100):$("#"+i.ids.load).children().eq(i.timer).children().fadeIn(100),i.timer++,i.timer>=6&&(i.timer=0)},this.setImage=function(){$("#"+this.ids.imageCont).css("visibility","visible"),i.lightboxOpen=!0,this.resizeImage(),$("#"+this.ids.imageCont).animate({opacity:1},400)},this.loadImage=function(t,e,o,a){if(i.lightboxOpen)if($("body").append(this.template.imageBox),"content"!==this.context&&$("body").append(this.template.loading),this.galleryCount>1&&($(this.template.nextButton).appendTo("#"+this.ids.imageCont),$(this.template.previousButton).appendTo("#"+this.ids.imageCont)),this.noResize=!1,o)$("#"+this.ids.imageCont).append('<div id="'+this.ids.imageId+'" style="background: #fff; overflow-y: auto; z-index: '+(this.options.overlayIndex+2)+';">'+o+"</div>"),a?(this.noResize=!0,this.origImageWidth=a[0],this.origImageHeight=a[1]):(this.origImageWidth=$("#"+this.ids.imageId).outerWidth()-this.options.imagePadding,this.origImageHeight=$("#"+this.ids.imageId).outerHeight()+40),this.setImage();else{var n=setInterval(this.loadingAnim,500);$('<img id="'+this.ids.imageId+'" style="z-index: '+(this.options.overlayIndex+2)+';" src="'+t+'" alt="'+e+'">').load(function(){$(this).appendTo("#"+i.ids.imageCont),i.origImageWidth=$(this).width(),i.origImageHeight=$(this).height(),i.setImage(),i.options.caption&&e&&($(i.template.caption).appendTo("#"+i.ids.imageCont),$("#"+i.ids.caption).text(e)),i.timer=0,clearInterval(n),$("#"+i.ids.load).fadeOut(200,function(){$(this).remove()})})}},$("body").on("click",'a[data-lightbox="content"], a[data-lightbox="gallery"], a[rel="lightbox"], a[data-lightbox="lightbox"]',function(t){var e="",o="",a=$(this).attr("rel");a||(a=$(this).data("lightbox"));var n=!1,s=!1;if("lightbox"==a){e=$(this).attr("href"),o=$(this).find("img").attr("alt"),o||(o="");var l=$('a[rel="lightbox"], a[data-lightbox="lightbox"]');i.galleryCount=l.length,i.currentImage=l.index(this)}else if("gallery"==a){i.subGalleryId=$(this).attr("id");var d=$(this).data("gallery").split(";");i.gallery[i.subGalleryId]=[];for(var h=0;h<d.length;h++)i.gallery[i.subGalleryId][h]=d[h].split(",");e=i.gallery[i.subGalleryId][0][0],o=i.gallery[i.subGalleryId][0][1],i.galleryCount=i.gallery[i.subGalleryId].length,i.currentImage=0}else{var r=$(this).next("div."+i.ids.content);n=r.html();var g=r.data("width"),p=r.data("height");g&&p&&(s=[g,p]),i.galleryCount=0}i.lightboxOpen=!0,i.context=a,$("body").append(i.template.overlayHTML),$("#"+i.ids.overlay).fadeIn(200),i.loadImage(e,o,n,s),t.preventDefault()}),$(window).resize(function(){i.lightboxOpen&&i.resizeImage()}),$("body").on("click","#"+this.ids.overlay+", #"+this.ids.closeButton,function(){$("#"+i.ids.overlay).fadeOut(400,function(){$(this).remove()}),$("#"+i.ids.imageCont).fadeOut(400,function(){$(this).remove()}),i.lightboxOpen=!1}),$("body").on("click","#"+this.ids.previousButton+", #"+this.ids.nextButton,function(){i.lightboxOpen=!0,$(this).attr("id")==i.ids.nextButton?(i.currentImage++,i.currentImage>i.galleryCount-1&&(i.currentImage=0)):(i.currentImage--,i.currentImage<0&&(i.currentImage=i.galleryCount-1)),$("#"+i.ids.imageCont).fadeOut(function(){$(this).remove();var t,e;if("gallery"==i.context)t=i.gallery[i.subGalleryId][i.currentImage][0],e=i.gallery[i.subGalleryId][i.currentImage][1];else{var o=$('a[rel="lightbox"], a[data-lightbox="lightbox"]');t=o.eq(i.currentImage).attr("href"),e=o.eq(i.currentImage).find("img").attr("alt")}i.loadImage(t,e)})})};lightLightBox=new i});
