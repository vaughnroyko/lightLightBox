/*!
 * lightLightbox v1.3 https://github.com/vaughnroyko/lightLightBox
 */
var LightLightBox=function(){that=this,this.getElementsByClassName=function(t){for(var e=[],i=document.getElementsByTagName("*"),n=0;n<i.length;n++)for(var o=i[n].className.split(" "),s=0;s<o.length;s++)o[s]==t&&e.push(i[n])
return e},this.getLinksWithLightboxAttributes=function(t){for(var e=[],i=document.getElementsByTagName("a"),n=0;n<i.length;n++)(i[n].getAttribute("rel")&&"lightbox"===i[n].getAttribute("rel")||i[n].getAttribute("data-lightbox")&&("lightbox"===i[n].getAttribute("data-lightbox")||!t&&"gallery"===i[n].getAttribute("data-lightbox")||!t&&"content"===i[n].getAttribute("data-lightbox")))&&e.push(i[n])
return e},this.next=function(t){var e
if(!(e=t.nextSibling))return!1
for(;1!=e.nodeType;)if(!(e=e.nextSibling))return!1
return e},this.hide=function(t){if(t.length)for(var e=0;e<t.length;e++)this.hidden(t[e])
else this.hidden(t)},this.hidden=function(t){t.style.opacity=0,setTimeout(function(){t.style.visibility="hidden"},this.options.transitionSpeedMS)},this.show=function(t,e){if(t.length)for(var i=0;i<t.length;i++)this.visible(t[i],e)
else this.visible(t,e)},this.visible=function(t,e){t.style.opacity=e?e:1,t.style.visibility="visible"},this.addEvent=function(t,e,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e[t]=i},this.getImageAltInNode=function(t){if(t)for(var e=0;e<t.length;e++)if("IMG"===t[e].tagName)return t[e].getAttribute("alt")
return""},this.hideScrollbars=function(){document.documentElement.style.overflow="hidden",document.body.scroll="no"},this.showScrollbars=function(){document.documentElement.style.overflow="auto",document.body.scroll="yes"},this.options={overlayIndex:101,overlayOpacity:.85,imagePadding:50,transitionSpeed:"0.35s",transitionSpeedMS:350,caption:!0,name:"lightlightbox"},this.ids={overlay:this.options.name+"-overlay",imageId:this.options.name+"-image",imageCont:this.options.name+"-cont",closeButton:this.options.name+"-close",nextButton:this.options.name+"-next",previousButton:this.options.name+"-prev",load:this.options.name+"-loading",content:this.options.name+"-content",caption:this.options.name+"-caption",container:this.options.name+"-container"},this.controlStyle="position: absolute; cursor: pointer; margin-top: -36px; z-index: "+(this.options.overlayIndex+3)+"; color: #fff; text-shadow: 0 0 10px #000; font-weight: 100; font-size: 48px; padding: 10px; ",this.transitions="-webkit-transition: opacity "+this.options.transitionSpeed+" ease-in-out; -moz-transition: opacity "+this.options.transitionSpeed+" ease-in-out; -ms-transition: opacity "+this.options.transitionSpeed+" ease-in-out; -o-transition: opacity "+this.options.transitionSpeed+" ease-in-out; transition: opacity "+this.options.transitionSpeed+" ease-in-out;",this.unselectable="-moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;",this.bullet='<div style="width: 20px; display: inline-block;"><span style="visibility: hidden; opacity: 0; '+this.transitions+'">&bull;</span></div>',this.template={overlayHTML:'<div id="'+this.ids.overlay+'" style="top: 0; left: 0; z-index: '+this.options.overlayIndex+"; background-color: #000; position: fixed; filter: alpha(opacity="+100*this.options.overlayOpacity+"); width: 100%; height: 100%; visibility: hidden; opacity: 0; "+this.transitions+'"></div>',imageBox:'<div id="'+this.ids.imageCont+'" style="font-family: Arial; visibility: hidden; opacity: 0; top: 0; margin: auto; position: absolute; z-index: '+(this.options.overlayIndex+2)+"; "+this.transitions+'"><div id="'+this.ids.closeButton+'" style="position: absolute; cursor: pointer; top: -10px; right: -10px; z-index: '+(this.options.overlayIndex+3)+"; color: #000; background: #fff; border-radius: 27px; padding: 0; height: 27px; width: 27px; text-align: center; line-height: 1.1; font-weight: 100; font-size: 27px; box-shadow: -3px 3px 15px #000; "+this.unselectable+'">&#215;</div></div>',loading:'<div id="'+this.ids.load+'" style="color: #fff; font-size: 26px; position: fixed; left: 0; top: 50%; text-align: center; width: 100%; z-index:'+(this.options.overlayIndex+1)+"; visibility: hidden; opacity: 0; "+this.unselectable+'">'+this.bullet+this.bullet+this.bullet+"</div>",previousButton:'<div style="'+this.controlStyle+"left: -40px; "+this.unselectable+'" id="'+this.ids.previousButton+'">&lsaquo;</div>',nextButton:'<div style="'+this.controlStyle+"right: -40px; "+this.unselectable+'" id="'+this.ids.nextButton+'">&rsaquo;</div>',caption:'<div id="'+this.ids.caption+'" style="position: absolute; padding: 15px; bottom: 0; left: 0; color: #fff; background: #000; box-sizing: border-box; background: rgba(0, 0, 0, '+this.options.overlayOpacity+')"></div>',container:'<div id="'+this.ids.container+'"></div>'},this.origImageWidth=0,this.origImageHeight=0,this.timer=0,this.galleryCount=0,this.subGalleryId=!1,this.currentImage=0,this.lightboxOpen=!1,this.gallery=[],this.context="",this.noResize=!1,this.loadingTimer=null,this.transitioning=!1,this.image=new Image
var t=this.getElementsByClassName(this.ids.content)
t.length&&this.hide(t),this.resizeImage=function(){if(this.lightboxOpen){var t=window.pageYOffset||document.documentElement.scrollTop,e=window.pageXOffset||document.documentElement.scrollLeft,i=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-this.options.imagePadding/2,n=Math.max(document.documentElement.clientWidth,window.innerWidth||0)-this.options.imagePadding,o=this.origImageHeight,s=this.origImageWidth
if(!o){var a=document.getElementById(this.ids.imageId).childNodes,h=a[1]
h||(h=a[0]),o=h.offsetHeight}s||(s=n-this.options.imagePadding)
var d=s,l=o,r=!1
if(!this.noResize)for(;!r;)d>n?(d=n-this.options.imagePadding,l=o/s*d):l>i?(l=i-this.options.imagePadding,"content"!==this.context&&(d=s/o*l)):r=!0
var g=t+i/2-l/2+this.options.imagePadding/4,m=e+n/2-d/2+this.options.imagePadding/2
document.getElementById(this.ids.imageCont).style.top=Math.floor(g)+"px",document.getElementById(this.ids.imageCont).style.left=Math.floor(m)+"px",document.getElementById(this.ids.imageCont).style.width=Math.floor(d)+"px",document.getElementById(this.ids.imageCont).style.height=Math.floor(l)+"px",this.galleryCount>1&&(document.getElementById(this.ids.nextButton).style.top=Math.floor(l/2)+"px",document.getElementById(this.ids.previousButton).style.top=Math.floor(l/2)+"px"),document.getElementById(this.ids.imageId).style.width=Math.floor(d)+"px",document.getElementById(this.ids.imageId).style.height=Math.floor(l)+"px"}},this.loadingAnim=function(){that.timer>=3?that.hide(document.getElementById(that.ids.load).childNodes[that.timer-3].childNodes[0]):that.show(document.getElementById(that.ids.load).childNodes[that.timer].childNodes[0]),++that.timer>=6&&(that.timer=0)},this.setImage=function(){this.lightboxOpen=!0,this.hideScrollbars(),this.resizeImage(),that.show(document.getElementById(that.ids.imageCont))},this.loadImage=function(t,e,i,n){if(this.lightboxOpen)if(this.noResize=!1,i)that.addNavigation(),document.getElementById(this.ids.imageCont).insertAdjacentHTML("beforeend",'<div id="'+this.ids.imageId+'" style="background: #fff; overflow-y: auto; z-index: '+(this.options.overlayIndex+2)+';">'+i+"</div>"),n?(this.noResize=!0,this.origImageWidth=n[0],this.origImageHeight=n[1]):(this.origImageWidth=null,this.origImageHeight=null,this.resizeImage()),this.setImage()
else{that.show(document.getElementById(that.ids.load)),this.loadingTimer=setInterval(this.loadingAnim,400)
var o='<img id="'+this.ids.imageId+'" style="z-index: '+(this.options.overlayIndex+2)+';" src="'+t+'" alt="'+e+'" width="0" height="0">'
this.image=new Image,this.image.onload=function(){that.addNavigation(),that.stopLoading(),document.getElementById(that.ids.imageCont).insertAdjacentHTML("beforeend",o),that.origImageWidth=that.image.width,that.origImageHeight=that.image.height,that.options.caption&&e&&(document.getElementById(that.ids.imageCont).insertAdjacentHTML("beforeend",that.template.caption),document.getElementById(that.ids.caption).insertAdjacentHTML("beforeend",e)),that.setImage()},this.image.src=t}},this.stopLoading=function(){this.timer=0,clearInterval(this.loadingTimer),this.hide(document.getElementById(this.ids.load))
for(var t=0;t<3;t++)this.hide(document.getElementById(that.ids.load).childNodes[t].childNodes[0])},this.addNavigation=function(){document.getElementById(this.ids.container).insertAdjacentHTML("beforeend",this.template.imageBox),this.galleryCount>1&&(document.getElementById(this.ids.imageCont).insertAdjacentHTML("beforeend",this.template.nextButton),document.getElementById(this.ids.imageCont).insertAdjacentHTML("beforeend",this.template.previousButton),this.addEvent("click",document.getElementById(this.ids.nextButton),function(){that.navigate(!0)}),this.addEvent("click",document.getElementById(this.ids.previousButton),function(){that.navigate(!1)})),this.addEvent("click",document.getElementById(this.ids.closeButton),function(){that.close()})},this.navigate=function(t){this.transitioning||(this.lightboxOpen=!0,this.hideScrollbars(),t?++this.currentImage>this.galleryCount-1&&(this.currentImage=0):--this.currentImage<0&&(this.currentImage=this.galleryCount-1),this.hide(document.getElementById(this.ids.imageCont)),this.transitioning=!0,setTimeout(function(){var t=document.getElementById(that.ids.imageCont)
t&&(t.outerHTML="")
var e,i
"gallery"==that.context?(e=that.gallery[that.subGalleryId][that.currentImage][0],i=that.gallery[that.subGalleryId][that.currentImage][1]):(e=that.lightboxGallery[that.currentImage].getAttribute("href"),i=that.getImageAltInNode(that.lightboxGallery[that.currentImage].childNodes)),that.loadImage(e,i),that.transitioning=!1},this.options.transitionSpeedMS))},this.close=function(){this.stopLoading(),this.hide(document.getElementById(this.ids.overlay)),document.getElementById(that.ids.imageCont)&&this.hide(document.getElementById(this.ids.imageCont)),that.lightboxOpen=!1,this.showScrollbars(),that.image.onload=null,setTimeout(function(){var t=document.getElementById(that.ids.imageCont)
t&&(t.outerHTML="")},this.options.transitionSpeedMS)},this.imageClick=function(t,e){var i="",n="",o=t.getAttribute("rel")
o||(o=t.getAttribute("data-lightbox"))
var s=!1,a=!1
if("lightbox"==o)i=t.getAttribute("href"),n=this.getImageAltInNode(t.childNodes),this.galleryCount=this.lightboxGallery.length,this.currentImage=e
else if("gallery"==o){this.subGalleryId=t.getAttribute("id")
var h=t.getAttribute("data-gallery").split(";")
this.gallery[this.subGalleryId]=[]
for(var d=0;d<h.length;d++)this.gallery[this.subGalleryId][d]=h[d].split(",")
i=this.gallery[this.subGalleryId][0][0],n=this.gallery[this.subGalleryId][0][1],this.galleryCount=this.gallery[this.subGalleryId].length,this.currentImage=0}else{var l=this.next(t)
if(l){s=l.innerHTML
var r=l.getAttribute("data-width"),g=l.getAttribute("data-height")
r&&g&&(a=[r,g])}this.galleryCount=0}this.lightboxOpen=!0,this.context=o,this.show(document.getElementById(this.ids.overlay),this.options.overlayOpacity),this.loadImage(i,n,s,a)},this.generateLinks=function(){for(var t=this.getLinksWithLightboxAttributes(),e=0;e<t.length;e++)!function(e){that.addEvent("click",t[e],function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,that.imageClick(t[e],e)})}(e)
this.lightboxGallery=this.getLinksWithLightboxAttributes(!0)},document.body.insertAdjacentHTML("beforeend",this.template.container),document.getElementById(this.ids.container).insertAdjacentHTML("beforeend",this.template.loading),document.getElementById(this.ids.container).insertAdjacentHTML("beforeend",this.template.overlayHTML),this.generateLinks(),this.addEvent("resize",window,function(){that.resizeImage()}),this.addEvent("click",document.getElementById(this.ids.overlay),function(){that.close()})}
window.onload=function(){lightLightBox=new LightLightBox}
